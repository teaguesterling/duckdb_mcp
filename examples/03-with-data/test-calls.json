{
  "description": "Test calls for the e-commerce data example",
  "calls": [
    {
      "name": "Initialize",
      "request": {
        "jsonrpc": "2.0",
        "id": 1,
        "method": "initialize",
        "params": {
          "protocolVersion": "2024-11-05",
          "capabilities": {},
          "clientInfo": {"name": "test", "version": "1.0"}
        }
      }
    },
    {
      "name": "List all tables and views",
      "request": {
        "jsonrpc": "2.0",
        "id": 2,
        "method": "tools/call",
        "params": {
          "name": "list_tables",
          "arguments": {
            "include_views": true
          }
        }
      }
    },
    {
      "name": "Describe customers table",
      "request": {
        "jsonrpc": "2.0",
        "id": 3,
        "method": "tools/call",
        "params": {
          "name": "describe",
          "arguments": {
            "table": "customers"
          }
        }
      }
    },
    {
      "name": "List all customers",
      "request": {
        "jsonrpc": "2.0",
        "id": 4,
        "method": "tools/call",
        "params": {
          "name": "query",
          "arguments": {
            "sql": "SELECT * FROM customers ORDER BY id"
          }
        }
      }
    },
    {
      "name": "Products by category",
      "request": {
        "jsonrpc": "2.0",
        "id": 5,
        "method": "tools/call",
        "params": {
          "name": "query",
          "arguments": {
            "sql": "SELECT category, COUNT(*) as count, AVG(price) as avg_price FROM products GROUP BY category ORDER BY count DESC"
          }
        }
      }
    },
    {
      "name": "Customer order summary view",
      "request": {
        "jsonrpc": "2.0",
        "id": 6,
        "method": "tools/call",
        "params": {
          "name": "query",
          "arguments": {
            "sql": "SELECT * FROM customer_orders ORDER BY total_spent DESC"
          }
        }
      }
    },
    {
      "name": "Top selling products",
      "request": {
        "jsonrpc": "2.0",
        "id": 7,
        "method": "tools/call",
        "params": {
          "name": "query",
          "arguments": {
            "sql": "SELECT product_name, category, units_sold, total_revenue FROM product_sales WHERE units_sold > 0 ORDER BY total_revenue DESC"
          }
        }
      }
    },
    {
      "name": "Orders with details",
      "request": {
        "jsonrpc": "2.0",
        "id": 8,
        "method": "tools/call",
        "params": {
          "name": "query",
          "arguments": {
            "sql": "SELECT * FROM order_details ORDER BY order_date DESC"
          }
        }
      }
    },
    {
      "name": "Join query - order items with product names",
      "request": {
        "jsonrpc": "2.0",
        "id": 9,
        "method": "tools/call",
        "params": {
          "name": "query",
          "arguments": {
            "sql": "SELECT o.id as order_id, c.name as customer, p.name as product, oi.quantity, oi.price FROM order_items oi JOIN orders o ON oi.order_id = o.id JOIN customers c ON o.customer_id = c.id JOIN products p ON oi.product_id = p.id ORDER BY o.id, oi.id"
          }
        }
      }
    },
    {
      "name": "Export products to CSV",
      "request": {
        "jsonrpc": "2.0",
        "id": 10,
        "method": "tools/call",
        "params": {
          "name": "export",
          "arguments": {
            "query": "SELECT * FROM products ORDER BY category, name",
            "format": "csv"
          }
        }
      }
    },
    {
      "name": "Database overview",
      "request": {
        "jsonrpc": "2.0",
        "id": 11,
        "method": "tools/call",
        "params": {
          "name": "database_info",
          "arguments": {}
        }
      }
    }
  ]
}
